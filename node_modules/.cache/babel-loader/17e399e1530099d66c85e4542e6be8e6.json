{"ast":null,"code":"import _toConsumableArray from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im\\u7684\\u526F\\u672C/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im\\u7684\\u526F\\u672C/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import{combineReducers}from'redux';import{INIT_CHAT_INFO,INIT_MESS_LIST,RECEIVE_CHAT_MSG,SEND_CHAT_MSG,CHANGE_RIGHT_TYPE,INIT_FRIEND_INFO,AUTH_SUCCESS,ERR_MSG,USERINFO,LOGOUT,MODIFY_USER_CONTACTS,GET_NEW_FRIENDS,GET_USER_MAILLIST}from'./action-type';import{initUser,initChatInfo,friendInfo}from'./init';// 当前登录的用户信息\nfunction user(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initUser;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case AUTH_SUCCESS:return _objectSpread({},action.data,{},state,{redirectTo:'/'});case USERINFO:var _action$data=action.data,userInfo=_action$data.userInfo,contacts=_action$data.contacts;return _objectSpread({},state,{userInfo:userInfo,contacts:contacts});case LOGOUT:return _objectSpread({},action.data,{redirectTo:'/login'});case ERR_MSG:return _objectSpread({},state,{msg:action.data,redirectTo:'/login'});case MODIFY_USER_CONTACTS:return _objectSpread({},state,{contacts:action.data.contacts});default:return state;}}// 好友的用户基本信息\nfunction friend(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:friendInfo;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case INIT_FRIEND_INFO:return _objectSpread({},state,{info:action.data});case GET_NEW_FRIENDS:return _objectSpread({},state,{newFriend:action.data});case GET_USER_MAILLIST:return _objectSpread({},state,{mailList:action.data});default:return state;}}// 当前查看的消息列表\nfunction chat(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initChatInfo;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case INIT_CHAT_INFO:return _objectSpread({},state,{},action.data);case INIT_MESS_LIST:return _objectSpread({},state,{},action.data);case SEND_CHAT_MSG:/* 发送消息 */case RECEIVE_CHAT_MSG:/* 接收消息 */var chatMsg=action.data;var messList=state.messList;// key 的关系是：当前用户id + 好友id\nvar key=action.type===SEND_CHAT_MSG?\"\".concat(chatMsg.id).concat(chatMsg.to_id):\"\".concat(chatMsg.to_id).concat(chatMsg.id);messList[key]=messList[key]?[].concat(_toConsumableArray(messList[key]),[chatMsg]):[chatMsg];return{chatUserInfo:state.chatUserInfo,messList:messList};case CHANGE_RIGHT_TYPE:return _objectSpread({},state,{},action.data);default:return state;}}export default combineReducers({user:user,chat:chat,friend:friend});","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im的副本/src/redux/reducers.js"],"names":["combineReducers","INIT_CHAT_INFO","INIT_MESS_LIST","RECEIVE_CHAT_MSG","SEND_CHAT_MSG","CHANGE_RIGHT_TYPE","INIT_FRIEND_INFO","AUTH_SUCCESS","ERR_MSG","USERINFO","LOGOUT","MODIFY_USER_CONTACTS","GET_NEW_FRIENDS","GET_USER_MAILLIST","initUser","initChatInfo","friendInfo","user","state","action","type","data","redirectTo","userInfo","contacts","msg","friend","info","newFriend","mailList","chat","chatMsg","messList","key","id","to_id","chatUserInfo"],"mappings":"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","sourcesContent":["import {combineReducers} from 'redux'\nimport {\n    INIT_CHAT_INFO, INIT_MESS_LIST, RECEIVE_CHAT_MSG, SEND_CHAT_MSG,\n    CHANGE_RIGHT_TYPE, INIT_FRIEND_INFO, AUTH_SUCCESS, ERR_MSG,\n    USERINFO, LOGOUT, MODIFY_USER_CONTACTS, GET_NEW_FRIENDS, GET_USER_MAILLIST\n} from './action-type'\nimport {initUser, initChatInfo, friendInfo} from './init'\n\n// 当前登录的用户信息\nfunction user(state = initUser, action) {\n    switch (action.type) {\n        case AUTH_SUCCESS:\n            return {...action.data, ...state, redirectTo: '/'}\n        case USERINFO:\n            const {userInfo, contacts} = action.data\n            return {...state, userInfo, contacts}\n        case LOGOUT:\n            return {...action.data, redirectTo: '/login'}\n        case ERR_MSG:\n            return {...state, msg: action.data, redirectTo: '/login'}\n        case MODIFY_USER_CONTACTS:\n            return {...state, contacts: action.data.contacts}\n        default:\n            return state\n    }\n}\n\n// 好友的用户基本信息\nfunction friend(state = friendInfo, action) {\n    switch (action.type) {\n        case INIT_FRIEND_INFO:\n            return {...state, info: action.data}\n        case GET_NEW_FRIENDS:\n            return {...state, newFriend: action.data}\n        case GET_USER_MAILLIST:\n            return {...state, mailList: action.data}\n        default:\n            return state\n    }\n}\n\n// 当前查看的消息列表\nfunction chat(state = initChatInfo, action) {\n    switch (action.type) {\n        case INIT_CHAT_INFO:\n            return {...state, ...action.data}\n        case INIT_MESS_LIST:\n            return {...state, ...action.data}\n        case SEND_CHAT_MSG:    /* 发送消息 */\n        case RECEIVE_CHAT_MSG: /* 接收消息 */\n            const chatMsg = action.data\n            let messList = state.messList\n            // key 的关系是：当前用户id + 好友id\n            let key = action.type === SEND_CHAT_MSG ? `${chatMsg.id}${chatMsg.to_id}` : `${chatMsg.to_id}${chatMsg.id}`;\n            messList[key] = messList[key] ? [...messList[key], chatMsg] : [chatMsg];\n            return {\n                chatUserInfo: state.chatUserInfo,\n                messList\n            }\n        case CHANGE_RIGHT_TYPE:\n            return {...state, ...action.data}\n        default:\n            return state\n    }\n}\n\nexport default combineReducers({\n    user, chat, friend\n})"]},"metadata":{},"sourceType":"module"}