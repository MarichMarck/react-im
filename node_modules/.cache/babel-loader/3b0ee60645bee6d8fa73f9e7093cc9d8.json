{"ast":null,"code":"import { combineReducers } from 'redux';\nimport { INIT_CHAT_INFO, INIT_MESS_LIST, RECEIVE_CHAT_MSG, CHANGE_RIGHT_TYPE, INIT_FRIEND_INFO, AUTH_SUCCESS, ERR_MSG, USERINFO, LOGOUT } from './action-type';\nimport { initUser, initChatInfo, friendInfo, initContact } from './init'; // 当前登录的用户信息\n\nfunction user(state = initUser, action) {\n  switch (action.type) {\n    case AUTH_SUCCESS:\n      return { ...action.data,\n        redirectTo: '/'\n      };\n\n    case USERINFO:\n      const {\n        msg,\n        redirectTo,\n        token\n      } = state;\n      return {\n        userInfo: action.data.userInfo,\n        msg,\n        redirectTo,\n        token\n      };\n\n    case LOGOUT:\n      return { ...action.data,\n        redirectTo: '/login'\n      };\n\n    case ERR_MSG:\n      return { ...state,\n        msg: action.data\n      };\n\n    default:\n      return state;\n  }\n} // 会话列表\n\n\nfunction contact(state = initContact, action) {\n  switch (action.type) {\n    default:\n      return state;\n  }\n} // 好友的用户基本信息\n\n\nfunction friend(state = friendInfo, action) {\n  switch (action.type) {\n    case INIT_FRIEND_INFO:\n      return { ...state,\n        ...action.data\n      };\n\n    default:\n      return state;\n  }\n} // 当前查看的消息列表\n\n\nfunction chat(state = initChatInfo, action) {\n  switch (action.type) {\n    case INIT_CHAT_INFO:\n      return { ...state,\n        ...action.data\n      };\n\n    case INIT_MESS_LIST:\n      return { ...state,\n        ...action.data\n      };\n\n    case RECEIVE_CHAT_MSG:\n      /* 接收消息 */\n      const chatMsg = action.data;\n      return {\n        chatUserInfo: state.chatUserInfo,\n        messList: [...state.messList, chatMsg]\n      };\n\n    case CHANGE_RIGHT_TYPE:\n      return { ...state,\n        ...action.data\n      };\n\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  user,\n  chat,\n  friend,\n  contact\n});","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im/src/redux/reducers.js"],"names":["combineReducers","INIT_CHAT_INFO","INIT_MESS_LIST","RECEIVE_CHAT_MSG","CHANGE_RIGHT_TYPE","INIT_FRIEND_INFO","AUTH_SUCCESS","ERR_MSG","USERINFO","LOGOUT","initUser","initChatInfo","friendInfo","initContact","user","state","action","type","data","redirectTo","msg","token","userInfo","contact","friend","chat","chatMsg","chatUserInfo","messList"],"mappings":"AAAA,SAASA,eAAT,QAAgC,OAAhC;AACA,SACIC,cADJ,EACoBC,cADpB,EACoCC,gBADpC,EAEIC,iBAFJ,EAEuBC,gBAFvB,EAEyCC,YAFzC,EAEuDC,OAFvD,EAGIC,QAHJ,EAGcC,MAHd,QAIO,eAJP;AAKA,SAASC,QAAT,EAAmBC,YAAnB,EAAiCC,UAAjC,EAA6CC,WAA7C,QAAgE,QAAhE,C,CAEA;;AACA,SAASC,IAAT,CAAcC,KAAK,GAAGL,QAAtB,EAAgCM,MAAhC,EAAwC;AACpC,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKX,YAAL;AACI,aAAO,EAAC,GAAGU,MAAM,CAACE,IAAX;AAAiBC,QAAAA,UAAU,EAAE;AAA7B,OAAP;;AACJ,SAAKX,QAAL;AACI,YAAM;AAAEY,QAAAA,GAAF;AAAOD,QAAAA,UAAP;AAAmBE,QAAAA;AAAnB,UAA6BN,KAAnC;AACA,aAAO;AAAEO,QAAAA,QAAQ,EAAEN,MAAM,CAACE,IAAP,CAAYI,QAAxB;AAAkCF,QAAAA,GAAlC;AAAuCD,QAAAA,UAAvC;AAAmDE,QAAAA;AAAnD,OAAP;;AACJ,SAAKZ,MAAL;AACI,aAAO,EAAC,GAAGO,MAAM,CAACE,IAAX;AAAiBC,QAAAA,UAAU,EAAE;AAA7B,OAAP;;AACJ,SAAKZ,OAAL;AACI,aAAO,EAAC,GAAGQ,KAAJ;AAAWK,QAAAA,GAAG,EAAEJ,MAAM,CAACE;AAAvB,OAAP;;AACJ;AACI,aAAOH,KAAP;AAXR;AAaH,C,CAED;;;AACA,SAASQ,OAAT,CAAiBR,KAAK,GAAGF,WAAzB,EAAsCG,MAAtC,EAA8C;AAC1C,UAAQA,MAAM,CAACC,IAAf;AACI;AACI,aAAOF,KAAP;AAFR;AAIH,C,CAED;;;AACA,SAASS,MAAT,CAAgBT,KAAK,GAAGH,UAAxB,EAAoCI,MAApC,EAA4C;AACxC,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKZ,gBAAL;AACI,aAAO,EAAC,GAAGU,KAAJ;AAAW,WAAGC,MAAM,CAACE;AAArB,OAAP;;AACJ;AACI,aAAOH,KAAP;AAJR;AAMH,C,CAED;;;AACA,SAASU,IAAT,CAAcV,KAAK,GAAGJ,YAAtB,EAAoCK,MAApC,EAA4C;AACxC,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKhB,cAAL;AACI,aAAO,EAAC,GAAGc,KAAJ;AAAW,WAAGC,MAAM,CAACE;AAArB,OAAP;;AACJ,SAAKhB,cAAL;AACI,aAAO,EAAC,GAAGa,KAAJ;AAAW,WAAGC,MAAM,CAACE;AAArB,OAAP;;AACJ,SAAKf,gBAAL;AAAuB;AACnB,YAAMuB,OAAO,GAAGV,MAAM,CAACE,IAAvB;AACA,aAAO;AACHS,QAAAA,YAAY,EAAEZ,KAAK,CAACY,YADjB;AAEHC,QAAAA,QAAQ,EAAE,CAAC,GAAGb,KAAK,CAACa,QAAV,EAAoBF,OAApB;AAFP,OAAP;;AAIJ,SAAKtB,iBAAL;AACI,aAAO,EAAC,GAAGW,KAAJ;AAAW,WAAGC,MAAM,CAACE;AAArB,OAAP;;AACJ;AACI,aAAOH,KAAP;AAdR;AAgBH;;AAED,eAAef,eAAe,CAAC;AAC3Bc,EAAAA,IAD2B;AACrBW,EAAAA,IADqB;AACfD,EAAAA,MADe;AACPD,EAAAA;AADO,CAAD,CAA9B","sourcesContent":["import { combineReducers } from 'redux'\nimport {\n    INIT_CHAT_INFO, INIT_MESS_LIST, RECEIVE_CHAT_MSG,\n    CHANGE_RIGHT_TYPE, INIT_FRIEND_INFO, AUTH_SUCCESS, ERR_MSG,\n    USERINFO, LOGOUT\n} from './action-type'\nimport { initUser, initChatInfo, friendInfo, initContact } from './init'\n\n// 当前登录的用户信息\nfunction user(state = initUser, action) {\n    switch (action.type) {\n        case AUTH_SUCCESS:\n            return {...action.data, redirectTo: '/'}\n        case USERINFO:\n            const { msg, redirectTo, token } = state\n            return { userInfo: action.data.userInfo, msg, redirectTo, token }\n        case LOGOUT:\n            return {...action.data, redirectTo: '/login'}\n        case ERR_MSG:\n            return {...state, msg: action.data}\n        default:\n            return state\n    }\n}\n\n// 会话列表\nfunction contact(state = initContact, action) {\n    switch (action.type) {\n        default:\n            return state\n    }\n}\n\n// 好友的用户基本信息\nfunction friend(state = friendInfo, action) {\n    switch (action.type) {\n        case INIT_FRIEND_INFO:\n            return {...state, ...action.data}\n        default:\n            return state\n    }\n}\n\n// 当前查看的消息列表\nfunction chat(state = initChatInfo, action) {\n    switch (action.type) {\n        case INIT_CHAT_INFO:\n            return {...state, ...action.data}\n        case INIT_MESS_LIST:\n            return {...state, ...action.data}\n        case RECEIVE_CHAT_MSG: /* 接收消息 */\n            const chatMsg = action.data\n            return {\n                chatUserInfo: state.chatUserInfo,\n                messList: [...state.messList, chatMsg],\n            }\n        case CHANGE_RIGHT_TYPE:\n            return {...state, ...action.data}\n        default:\n            return state\n    }\n}\n\nexport default combineReducers({\n    user, chat, friend, contact\n})"]},"metadata":{},"sourceType":"module"}