{"ast":null,"code":"/**\n * 对应 reducers 中的 action 同步/异步请求\n */\nimport Cookies from 'js-cookie';\nimport { initChatData, receiveChatMsg, showRightType, showFriendInfo, authSuccess, errMsg, userInfo, logOut, initContacts } from './init';\nimport { websocket } from '../utils/websocket';\nimport { reqLogin, reqUserInfo, reqLogout } from '../api'; // 用户登录\n\nexport const login = (username, password) => {\n  return async dispatch => {\n    const response = await reqLogin({\n      username,\n      password\n    });\n    const result = response.data;\n\n    if (result.code === 200) {\n      Cookies.set('token', result.data.token);\n      dispatch(authSuccess(result.data));\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 退出登录\n\nexport const logout = () => {\n  return async dispatch => {\n    const response = await reqLogout();\n    const result = response.data;\n\n    if (result.code === 200) {\n      Cookies.remove('token');\n      dispatch(logOut({}));\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 获取用户信息\n\nexport const initUserInfo = token => {\n  return async dispatch => {\n    const response = await reqUserInfo(token);\n    const result = response.data;\n\n    if (result.code === 200) {\n      dispatch(userInfo(result.data));\n      websocket(result.data.userInfo);\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 初始化消息列表\n\nexport const initChatInfo = chatUserInfo => {\n  return dispatch => {\n    let messList = chatUserInfo.uid === 1 ? [{\n      id: 1,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 2,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 3,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 4,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 5,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 6,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 7,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 8,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 9,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 10,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 11,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 12,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 13,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"好了好了，别说了\",\n      position: \"right\"\n    }] : [];\n    setTimeout(() => {\n      dispatch(initChatData({\n        loading: false\n      }));\n    }, 1000);\n    dispatch(initChatData({\n      chatUserInfo,\n      messList,\n      loading: true,\n      showRightType: 'message'\n    }));\n  };\n}; // 初始化会话列表\n\nfunction initUserContacts() {\n  return dispatch => {\n    const contacts = [{\n      uid: 1,\n      \"name\": \"马云\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      \"last\": \"明天 9:00 准时到哦\",\n      unread: 10\n    }, {\n      uid: 2,\n      \"name\": \"王健林\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778837077&di=f569a7c9412eae7b1068ee89ccc9aa9f&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170709%2Fc266207e9ec74666b4dee5f74c634ae1_th.jpg\",\n      \"last\": \"什么？这是什么意思\",\n      unread: 300\n    }, {\n      uid: 3,\n      \"name\": \"马化腾\",\n      \"avatar\": \"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1448222705,364131329&fm=26&gp=0.jpg\",\n      \"last\": \"今天，你充钱了吗？\",\n      unread: 1\n    }, {\n      uid: 4,\n      \"name\": \"巴菲特\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778875578&di=e01fad34bb5d118d8f2a3b4d330b0482&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170518%2F4fbdc7b308224171b7eb127ef241d211_th.jpg\",\n      \"last\": \"明天一起吃饭啊\",\n      unread: 5\n    }, {\n      uid: 5,\n      \"name\": \"刘亦菲\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778899824&di=86416b5c424eec83f25460f53223cded&imgtype=0&src=http%3A%2F%2Fwx3.sinaimg.cn%2Fbmiddle%2F69949546ly1gaxecjgu3gj20u00mi495.jpg\",\n      \"last\": \"今天拍了宣传照，快去看看吧\",\n      unread: 1\n    }, {\n      uid: 6,\n      \"name\": \"刘强东\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778918134&di=a1a98d63733b3abf50a7bf2833061a71&imgtype=jpg&src=http%3A%2F%2Fimg3.imgtn.bdimg.com%2Fit%2Fu%3D3934483023%2C600439244%26fm%3D214%26gp%3D0.jpg\",\n      \"last\": \"我脸盲，我不知道她漂不漂亮\",\n      unread: 1\n    }, {\n      uid: 7,\n      \"name\": \"李彦宏\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778934832&di=0696ccada3b7bd6be113536edcfe567f&imgtype=0&src=http%3A%2F%2Fimage.woshipm.com%2Fwp-files%2F2014%2F05%2F0035.jpg\",\n      \"last\": \"百度AI人工智能，造福人类，哈哈哈\",\n      unread: 100\n    }, {\n      uid: 8,\n      \"name\": \"雷军\",\n      \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582780482194&di=aab09c98f3d82137079cba7fe267b0dc&imgtype=0&src=http%3A%2F%2Fimg.mp.sohu.com%2Fupload%2F20180618%2Fa329dc911c83460b9e16f2a5cc2db364_th.jpg\",\n      \"last\": \"小米，永远相信美好的事情即将发生\",\n      unread: 128\n    }];\n    dispatch();\n  };\n} // 切换右侧显示状态\n\n\nexport const changeRightType = type => {\n  return dispatch => {\n    dispatch(showRightType({\n      showRightType: type\n    }));\n  };\n}; // 发送消息\n\nexport const sendChatMsg = chat => {\n  return dispatch => {\n    dispatch(receiveChatMsg(chat));\n  };\n}; // 获取好友基本信息\n\nexport const getFriendInfo = friend_uid => {\n  return dispatch => {\n    /* 获取好友用户信息 */\n    dispatch(changeRightType('userInfo'));\n    dispatch(showFriendInfo(friend_uid));\n  };\n};","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im/src/redux/actions.js"],"names":["Cookies","initChatData","receiveChatMsg","showRightType","showFriendInfo","authSuccess","errMsg","userInfo","logOut","initContacts","websocket","reqLogin","reqUserInfo","reqLogout","login","username","password","dispatch","response","result","data","code","set","token","msg","logout","remove","initUserInfo","initChatInfo","chatUserInfo","messList","uid","id","avatar","message","position","setTimeout","loading","initUserContacts","contacts","unread","changeRightType","type","sendChatMsg","chat","getFriendInfo","friend_uid"],"mappings":"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","sourcesContent":["/**\n * 对应 reducers 中的 action 同步/异步请求\n */\nimport Cookies from 'js-cookie'\nimport {\n    initChatData, receiveChatMsg, showRightType, showFriendInfo, authSuccess, errMsg, userInfo,\n    logOut, initContacts\n} from './init'\n\nimport { websocket } from '../utils/websocket'\nimport { reqLogin,reqUserInfo,reqLogout } from '../api'\n\n// 用户登录\nexport const login = (username, password) => {\n    return async dispatch => {\n        const response = await reqLogin({username, password})\n        const result = response.data\n        if (result.code === 200) {\n            Cookies.set('token', result.data.token)\n            dispatch(authSuccess(result.data))\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 退出登录\nexport const logout = () => {\n    return async dispatch => {\n        const response = await reqLogout()\n        const result = response.data\n        if (result.code === 200) {\n            Cookies.remove('token')\n            dispatch(logOut({}))\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 获取用户信息\nexport const initUserInfo = token => {\n    return async dispatch => {\n        const response = await reqUserInfo(token)\n        const result = response.data\n        if (result.code === 200) {\n            dispatch(userInfo(result.data))\n            websocket(result.data.userInfo)\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 初始化消息列表\nexport const initChatInfo = chatUserInfo => {\n    return dispatch => {\n        let messList = chatUserInfo.uid === 1 ? [\n            {id: 1, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 2, avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\", message: \"嗯，我也是\", position: \"right\"},\n            {id: 3, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 4, avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\", message: \"嗯，我也是\", position: \"right\"},\n            {id: 5, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 6, avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\", message: \"嗯，我也是\", position: \"right\"},\n            {id: 7, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 8, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 9, avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\", message: \"嗯，我也是\", position: \"right\"},\n            {id: 10, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 11, avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\", message: \"嗯，我也是\", position: \"right\"},\n            {id: 12, avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\", position: \"left\"},\n            {id: 13, avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\", message: \"好了好了，别说了\", position: \"right\"},\n        ] : []\n        setTimeout(() => { dispatch(initChatData({ loading: false })) }, 1000)\n        dispatch(initChatData({ chatUserInfo, messList, loading: true, showRightType: 'message' }))\n    }\n}\n\n// 初始化会话列表\nfunction initUserContacts() {\n    return dispatch => {\n        const contacts = [\n            { uid: 1, \"name\": \"马云\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", \"last\":\"明天 9:00 准时到哦\", unread: 10 },\n            { uid: 2, \"name\": \"王健林\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778837077&di=f569a7c9412eae7b1068ee89ccc9aa9f&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170709%2Fc266207e9ec74666b4dee5f74c634ae1_th.jpg\", \"last\":\"什么？这是什么意思\", unread: 300 },\n            { uid: 3, \"name\": \"马化腾\", \"avatar\": \"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1448222705,364131329&fm=26&gp=0.jpg\", \"last\":\"今天，你充钱了吗？\", unread: 1 },\n            { uid: 4, \"name\": \"巴菲特\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778875578&di=e01fad34bb5d118d8f2a3b4d330b0482&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170518%2F4fbdc7b308224171b7eb127ef241d211_th.jpg\", \"last\":\"明天一起吃饭啊\", unread: 5 },\n            { uid: 5, \"name\": \"刘亦菲\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778899824&di=86416b5c424eec83f25460f53223cded&imgtype=0&src=http%3A%2F%2Fwx3.sinaimg.cn%2Fbmiddle%2F69949546ly1gaxecjgu3gj20u00mi495.jpg\", \"last\":\"今天拍了宣传照，快去看看吧\", unread: 1 },\n            { uid: 6, \"name\": \"刘强东\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778918134&di=a1a98d63733b3abf50a7bf2833061a71&imgtype=jpg&src=http%3A%2F%2Fimg3.imgtn.bdimg.com%2Fit%2Fu%3D3934483023%2C600439244%26fm%3D214%26gp%3D0.jpg\", \"last\":\"我脸盲，我不知道她漂不漂亮\", unread: 1 },\n            { uid: 7, \"name\": \"李彦宏\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778934832&di=0696ccada3b7bd6be113536edcfe567f&imgtype=0&src=http%3A%2F%2Fimage.woshipm.com%2Fwp-files%2F2014%2F05%2F0035.jpg\", \"last\":\"百度AI人工智能，造福人类，哈哈哈\", unread: 100 },\n            { uid: 8, \"name\": \"雷军\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582780482194&di=aab09c98f3d82137079cba7fe267b0dc&imgtype=0&src=http%3A%2F%2Fimg.mp.sohu.com%2Fupload%2F20180618%2Fa329dc911c83460b9e16f2a5cc2db364_th.jpg\", \"last\":\"小米，永远相信美好的事情即将发生\", unread: 128 },\n        ]\n        dispatch()\n    }\n}\n\n// 切换右侧显示状态\nexport const changeRightType = type => {\n    return dispatch => {\n        dispatch(showRightType({ showRightType: type }))\n    }\n}\n\n// 发送消息\nexport const sendChatMsg = chat => {\n    return dispatch => {\n        dispatch(receiveChatMsg(chat))\n    }\n}\n\n// 获取好友基本信息\nexport const getFriendInfo = friend_uid => {\n    return dispatch => {\n        /* 获取好友用户信息 */\n        dispatch(changeRightType('userInfo'))\n        dispatch(showFriendInfo(friend_uid))\n    }\n}"]},"metadata":{},"sourceType":"module"}