{"ast":null,"code":"import \"antd/lib/skeleton/style\";\nimport _Skeleton from \"antd/lib/skeleton\";\nimport \"antd/lib/row/style\";\nimport _Row from \"antd/lib/row\";\nimport \"antd/lib/col/style\";\nimport _Col from \"antd/lib/col\";\nimport \"antd/lib/avatar/style\";\nimport _Avatar from \"antd/lib/avatar\";\nvar _jsxFileName = \"/Users/mr.bo/\\u9879\\u76EE/React/react-im/src/pages/chat/message/index.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nclass Message extends Component {\n  constructor(...args) {\n    super(...args);\n\n    this.scrollToBottom = () => {\n      this.messagesEnd.scrollIntoView({\n        behavior: 'auto'\n      });\n    };\n\n    this.getMessList = () => {\n      const {\n        chat: {\n          messList\n        }\n      } = this.props;\n      return messList.map(item => {\n        if (item.position === \"left\") {\n          return React.createElement(\"div\", {\n            key: item.id,\n            className: \"message-item message-left\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 33\n            },\n            __self: this\n          }, React.createElement(_Row, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 34\n            },\n            __self: this\n          }, React.createElement(_Col, {\n            span: 1,\n            style: {\n              minWidth: \"44px\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 35\n            },\n            __self: this\n          }, React.createElement(_Avatar, {\n            shape: \"square\",\n            src: item.avatar,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 36\n            },\n            __self: this\n          })), React.createElement(_Col, {\n            span: 20,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 38\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"message\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 39\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 40\n            },\n            __self: this\n          }, item.message)))));\n        } else {\n          return React.createElement(\"div\", {\n            key: item.id,\n            className: \"message-item message-right\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48\n            },\n            __self: this\n          }, React.createElement(_Row, {\n            gutter: 16,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          }, React.createElement(_Col, {\n            span: 23,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 50\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            style: {\n              width: \"100%\",\n              background: \"red\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 51\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            className: \"message\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 52\n            },\n            __self: this\n          }, React.createElement(\"span\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          }, item.message)))), React.createElement(_Col, {\n            span: 1,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 57\n            },\n            __self: this\n          }, React.createElement(\"div\", {\n            style: {\n              width: \"100%\",\n              background: \"black\"\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 58\n            },\n            __self: this\n          }, React.createElement(_Avatar, {\n            shape: \"square\",\n            src: item.avatar,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 59\n            },\n            __self: this\n          })))));\n        }\n      });\n    };\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n\n  render() {\n    const {\n      chat: {\n        loading\n      }\n    } = this.props;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 18\n      },\n      __self: this\n    }, React.createElement(_Skeleton, {\n      loading: loading,\n      avatar: {\n        shape: \"square\"\n      },\n      active: true,\n      paragraph: {\n        rows: 6\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 19\n      },\n      __self: this\n    }, this.getMessList()), React.createElement(\"div\", {\n      ref: el => {\n        this.messagesEnd = el;\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 22\n      },\n      __self: this\n    }));\n  } // 获取消息列表的 dom 结构\n\n\n}\n\nexport default connect(state => ({\n  chat: state.chat\n}), {})(Message);","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im/src/pages/chat/message/index.jsx"],"names":["React","Component","connect","Message","scrollToBottom","messagesEnd","scrollIntoView","behavior","getMessList","chat","messList","props","map","item","position","id","minWidth","avatar","message","width","background","componentDidUpdate","render","loading","shape","rows","el","state"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Avatar, Row, Col, Skeleton } from 'antd'\n\nclass Message extends Component {\n\n    componentDidUpdate() {\n        this.scrollToBottom()\n    }\n\n    scrollToBottom = () => {\n        this.messagesEnd.scrollIntoView({ behavior: 'auto' });\n    }\n\n    render() {\n        const { chat: { loading } } = this.props\n        return (\n            <div>\n                <Skeleton loading={loading} avatar={{ shape: \"square\" }} active paragraph={{ rows: 6 }}>\n                    { this.getMessList() }\n                </Skeleton>\n                <div ref={(el) => { this.messagesEnd = el }} />\n            </div>\n        )\n    }\n\n    // 获取消息列表的 dom 结构\n    getMessList = () => {\n        const { chat: { messList } } = this.props\n        return messList.map(item => {\n            if(item.position === \"left\") {\n                return (\n                    <div key={item.id} className=\"message-item message-left\">\n                        <Row>\n                            <Col span={1} style={{ minWidth: \"44px\" }}>\n                                <Avatar shape=\"square\" src={item.avatar} />\n                            </Col>\n                            <Col span={20}>\n                                <div className=\"message\">\n                                    <span>{item.message}</span>\n                                </div>\n                            </Col>\n                        </Row>\n                    </div>\n                )\n            } else {\n                return (\n                    <div key={item.id} className=\"message-item message-right\">\n                        <Row gutter={16}>\n                            <Col span={23}>\n                                <div style={{ width: \"100%\", background: \"red\" }}>\n                                    <div className=\"message\">\n                                        <span>{item.message}</span>\n                                    </div>\n                                </div>\n                            </Col>\n                            <Col span={1}>\n                                <div style={{ width: \"100%\", background: \"black\" }}>\n                                    <Avatar shape=\"square\" src={item.avatar} />\n                                </div>\n                            </Col>\n                        </Row>\n                        {/*<Row>*/}\n                        {/*    <Col span={1} push={23} className=\"right-avatar\">*/}\n                        {/*        <Avatar shape=\"square\" src={item.avatar} />*/}\n                        {/*    </Col>*/}\n                        {/*    <Col span={21} className=\"right-message\">*/}\n                        {/*        <div className=\"message\">*/}\n                        {/*            <span>{item.message}</span>*/}\n                        {/*        </div>*/}\n                        {/*    </Col>*/}\n                        {/*</Row>*/}\n                    </div>\n                )\n            }\n        })\n    }\n}\n\nexport default connect(\n    state => ({ chat: state.chat }),\n    {}\n)(Message)"]},"metadata":{},"sourceType":"module"}