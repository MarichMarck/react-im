{"ast":null,"code":"import\"antd/lib/skeleton/style\";import _Skeleton from\"antd/lib/skeleton\";import\"antd/lib/row/style\";import _Row from\"antd/lib/row\";import\"antd/lib/col/style\";import _Col from\"antd/lib/col\";import\"antd/lib/avatar/style\";import _Avatar from\"antd/lib/avatar\";import _classCallCheck from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';var Message=/*#__PURE__*/function(_Component){_inherits(Message,_Component);function Message(){var _getPrototypeOf2;var _this;_classCallCheck(this,Message);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Message)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.scrollToBottom=function(){_this.messagesEnd.scrollIntoView({behavior:'auto'});};_this.getMessList=function(){var messList=_this.props.chat.messList;return messList.map(function(item){if(item.position===\"left\"){return React.createElement(\"div\",{key:item.id,className:\"message-item message-left\"},React.createElement(_Row,null,React.createElement(_Col,{span:1},React.createElement(_Avatar,{shape:\"square\",src:item.avatar})),React.createElement(_Col,{span:23},React.createElement(\"div\",{className:\"message\"},React.createElement(\"span\",null,item.message)))));}else{return React.createElement(\"div\",{key:item.id,className:\"message-item message-right\"},React.createElement(_Row,null,React.createElement(_Col,{span:1,push:23,style:{textAlign:\"right\"}},React.createElement(_Avatar,{shape:\"square\",src:item.avatar})),React.createElement(_Col,{span:23,pull:1},React.createElement(\"div\",{className:\"message\"},React.createElement(\"span\",null,item.message)))));}});};return _this;}_createClass(Message,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){this.scrollToBottom();}},{key:\"render\",value:function render(){var _this2=this;var loading=this.props.chat.loading;return React.createElement(\"div\",null,React.createElement(_Skeleton,{loading:loading,avatar:{shape:\"square\"},active:true,paragraph:{rows:6}},this.getMessList()),React.createElement(\"div\",{ref:function ref(el){_this2.messagesEnd=el;}}));}// 获取消息列表的 dom 结构\n}]);return Message;}(Component);export default connect(function(state){return{chat:state.chat};},{})(Message);","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im/src/pages/chat/message/index.jsx"],"names":["React","Component","connect","Message","scrollToBottom","messagesEnd","scrollIntoView","behavior","getMessList","messList","props","chat","map","item","position","id","avatar","message","textAlign","loading","shape","rows","el","state"],"mappings":"q3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,C,GAGMC,CAAAA,O,mYAMFC,c,CAAiB,UAAM,CACnB,MAAKC,WAAL,CAAiBC,cAAjB,CAAgC,CAAEC,QAAQ,CAAE,MAAZ,CAAhC,EACH,C,OAeDC,W,CAAc,UAAM,IACAC,CAAAA,QADA,CACe,MAAKC,KADpB,CACRC,IADQ,CACAF,QADA,CAEhB,MAAOA,CAAAA,QAAQ,CAACG,GAAT,CAAa,SAAAC,IAAI,CAAI,CACxB,GAAGA,IAAI,CAACC,QAAL,GAAkB,MAArB,CAA6B,CACzB,MACI,4BAAK,GAAG,CAAED,IAAI,CAACE,EAAf,CAAmB,SAAS,CAAC,2BAA7B,EACI,8BACI,0BAAK,IAAI,CAAE,CAAX,EACI,6BAAQ,KAAK,CAAC,QAAd,CAAuB,GAAG,CAAEF,IAAI,CAACG,MAAjC,EADJ,CADJ,CAII,0BAAK,IAAI,CAAE,EAAX,EACI,2BAAK,SAAS,CAAC,SAAf,EACI,gCAAOH,IAAI,CAACI,OAAZ,CADJ,CADJ,CAJJ,CADJ,CADJ,CAcH,CAfD,IAeO,CACH,MACI,4BAAK,GAAG,CAAEJ,IAAI,CAACE,EAAf,CAAmB,SAAS,CAAC,4BAA7B,EACI,8BACI,0BAAK,IAAI,CAAE,CAAX,CAAc,IAAI,CAAE,EAApB,CAAwB,KAAK,CAAE,CAAEG,SAAS,CAAE,OAAb,CAA/B,EACI,6BAAQ,KAAK,CAAC,QAAd,CAAuB,GAAG,CAAEL,IAAI,CAACG,MAAjC,EADJ,CADJ,CAII,0BAAK,IAAI,CAAE,EAAX,CAAe,IAAI,CAAE,CAArB,EACI,2BAAK,SAAS,CAAC,SAAf,EACI,gCAAOH,IAAI,CAACI,OAAZ,CADJ,CADJ,CAJJ,CADJ,CADJ,CAcH,CACJ,CAhCM,CAAP,CAiCH,C,kGAxDoB,CACjB,KAAKb,cAAL,GACH,C,uCAMQ,oBACWe,CAAAA,OADX,CACyB,KAAKT,KAD9B,CACGC,IADH,CACWQ,OADX,CAEL,MACI,gCACI,+BAAU,OAAO,CAAEA,OAAnB,CAA4B,MAAM,CAAE,CAAEC,KAAK,CAAE,QAAT,CAApC,CAAyD,MAAM,KAA/D,CAAgE,SAAS,CAAE,CAAEC,IAAI,CAAE,CAAR,CAA3E,EACM,KAAKb,WAAL,EADN,CADJ,CAII,2BAAK,GAAG,CAAE,aAACc,EAAD,CAAQ,CAAE,MAAI,CAACjB,WAAL,CAAmBiB,EAAnB,CAAuB,CAA3C,EAJJ,CADJ,CAQH,CAED;qBAtBkBrB,S,EA6DtB,cAAeC,CAAAA,OAAO,CAClB,SAAAqB,KAAK,QAAK,CAAEZ,IAAI,CAAEY,KAAK,CAACZ,IAAd,CAAL,EADa,CAElB,EAFkB,CAAP,CAGbR,OAHa,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Avatar, Row, Col, Skeleton } from 'antd'\n\nclass Message extends Component {\n\n    componentDidUpdate() {\n        this.scrollToBottom()\n    }\n\n    scrollToBottom = () => {\n        this.messagesEnd.scrollIntoView({ behavior: 'auto' });\n    }\n\n    render() {\n        const { chat: { loading } } = this.props\n        return (\n            <div>\n                <Skeleton loading={loading} avatar={{ shape: \"square\" }} active paragraph={{ rows: 6 }}>\n                    { this.getMessList() }\n                </Skeleton>\n                <div ref={(el) => { this.messagesEnd = el }} />\n            </div>\n        )\n    }\n\n    // 获取消息列表的 dom 结构\n    getMessList = () => {\n        const { chat: { messList } } = this.props\n        return messList.map(item => {\n            if(item.position === \"left\") {\n                return (\n                    <div key={item.id} className=\"message-item message-left\">\n                        <Row>\n                            <Col span={1}>\n                                <Avatar shape=\"square\" src={item.avatar} />\n                            </Col>\n                            <Col span={23}>\n                                <div className=\"message\">\n                                    <span>{item.message}</span>\n                                </div>\n                            </Col>\n                        </Row>\n                    </div>\n                )\n            } else {\n                return (\n                    <div key={item.id} className=\"message-item message-right\">\n                        <Row>\n                            <Col span={1} push={23} style={{ textAlign: \"right\" }}>\n                                <Avatar shape=\"square\" src={item.avatar} />\n                            </Col>\n                            <Col span={23} pull={1}>\n                                <div className=\"message\">\n                                    <span>{item.message}</span>\n                                </div>\n                            </Col>\n                        </Row>\n                    </div>\n                )\n            }\n        })\n    }\n}\n\nexport default connect(\n    state => ({ chat: state.chat }),\n    {}\n)(Message)"]},"metadata":{},"sourceType":"module"}