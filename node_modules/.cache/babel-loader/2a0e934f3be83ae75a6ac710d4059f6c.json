{"ast":null,"code":"/**\n * 对应 reducers 中的 action 同步/异步请求\n */\nimport Cookies from 'js-cookie';\nimport { websocket } from '../utils/websocket';\nimport { initChatData, receiveChatMsg, showRightType, showFriendInfo, authSuccess, errMsg, userInfo, logOut, modifyUserContacts, getNewFriends, getMailList } from './init';\nimport { reqLogin, reqUserInfo, reqLogout, reqUserChatDataInit, reqNewFriendList, reqUserMailList } from '../api';\nimport { pySegSort } from '../utils'; // 用户登录\n\nexport const login = (username, password) => {\n  return async dispatch => {\n    const response = await reqLogin({\n      username,\n      password\n    });\n    const result = response.data;\n\n    if (result.code === 200) {\n      Cookies.set('token', result.data.token);\n      dispatch(authSuccess(result.data));\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 退出登录\n\nexport const logout = () => {\n  return async dispatch => {\n    const response = await reqLogout();\n    const result = response.data;\n\n    if (result.code === 200) {\n      Cookies.remove('token');\n      dispatch(logOut({}));\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 界面信息初始化\n\nexport const initMain = token => {\n  return async dispatch => {\n    const response = await reqUserChatDataInit(token);\n    const result = response.data;\n\n    if (result.code === 200) {\n      // 返回值得到的是 用户信息以及历史会话\n      const {\n        user,\n        contact\n      } = result.data;\n      dispatch(userInfo({\n        userInfo: user,\n        contacts: contact\n      }));\n      websocket(user);\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 获取用户信息\n\nexport const initUserInfo = token => {\n  return async dispatch => {\n    const response = await reqUserInfo(token);\n    const result = response.data;\n\n    if (result.code === 200) {\n      dispatch(userInfo(result.data));\n      websocket(result.data.userInfo);\n    } else {\n      dispatch(errMsg(result.msg));\n    }\n  };\n}; // 修改消息会话列表\n\nexport const modifyContacts = contacts => {\n  return dispatch => {\n    dispatch(modifyUserContacts({\n      contacts\n    }));\n  };\n}; // 初始化消息列表\n\nexport const initChatInfo = chatUserInfo => {\n  return dispatch => {\n    let messList = chatUserInfo.uid === 1 ? [{\n      id: 1,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 2,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 3,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 4,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 5,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 6,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 7,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 8,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 9,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 10,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 11,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"嗯，我也是\",\n      position: \"right\"\n    }, {\n      id: 12,\n      avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n      message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n      position: \"left\"\n    }, {\n      id: 13,\n      avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n      message: \"好了好了，别说了\",\n      position: \"right\"\n    }] : [];\n    dispatch(initChatData({\n      chatUserInfo,\n      messList,\n      loading: false,\n      showRightType: 'message'\n    }));\n  };\n}; // 切换右侧显示状态\n\nexport const changeRightType = type => {\n  return dispatch => {\n    dispatch(showRightType({\n      showRightType: type\n    }));\n  };\n}; // 发送消息\n\nexport const sendChatMsg = chat => {\n  return dispatch => {\n    dispatch(receiveChatMsg(chat));\n  };\n}; // 收到好友消息\n// export const receiveChatMsg = chat => {\n//     return dispatch => {\n//         dispatch(receiveChatMsg(chat))\n//     }\n// }\n// 获取好友基本信息\n\nexport const getFriendInfo = friend_uid => {\n  return async dispatch => {\n    dispatch(changeRightType('userInfo'));\n    await dispatch(showFriendInfo(friend_uid));\n  };\n}; // 获取好友申请列表\n\nexport const getNewFriendList = token => {\n  return async dispatch => {\n    const response = await reqNewFriendList({\n      token\n    });\n    const result = response.data;\n\n    if (result.code === 200) {\n      dispatch(getNewFriends(result.data.list));\n    }\n  };\n}; // 获取用户通讯录列表\n\nexport const getUserMailList = token => {\n  return async dispatch => {\n    const response = await reqUserMailList({\n      token\n    });\n    const result = response.data;\n\n    if (result.code === 200) {\n      const mailList = pySegSort(result.data.list);\n      dispatch(getMailList(mailList));\n    }\n  };\n};","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im/src/redux/actions.js"],"names":["Cookies","websocket","initChatData","receiveChatMsg","showRightType","showFriendInfo","authSuccess","errMsg","userInfo","logOut","modifyUserContacts","getNewFriends","getMailList","reqLogin","reqUserInfo","reqLogout","reqUserChatDataInit","reqNewFriendList","reqUserMailList","pySegSort","login","username","password","dispatch","response","result","data","code","set","token","msg","logout","remove","initMain","user","contact","contacts","initUserInfo","modifyContacts","initChatInfo","chatUserInfo","messList","uid","id","avatar","message","position","loading","changeRightType","type","sendChatMsg","chat","getFriendInfo","friend_uid","getNewFriendList","list","getUserMailList","mailList"],"mappings":"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","sourcesContent":["/**\n * 对应 reducers 中的 action 同步/异步请求\n */\nimport Cookies from 'js-cookie'\nimport {websocket} from '../utils/websocket'\nimport {\n    initChatData, receiveChatMsg, showRightType, showFriendInfo, authSuccess, errMsg, userInfo,\n    logOut, modifyUserContacts, getNewFriends, getMailList\n} from './init'\nimport {\n    reqLogin, reqUserInfo, reqLogout, reqUserChatDataInit, reqNewFriendList,\n    reqUserMailList\n} from '../api'\nimport {pySegSort} from '../utils'\n\n// 用户登录\nexport const login = (username, password) => {\n    return async dispatch => {\n        const response = await reqLogin({username, password})\n        const result = response.data\n        if (result.code === 200) {\n            Cookies.set('token', result.data.token)\n            dispatch(authSuccess(result.data))\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 退出登录\nexport const logout = () => {\n    return async dispatch => {\n        const response = await reqLogout()\n        const result = response.data\n        if (result.code === 200) {\n            Cookies.remove('token')\n            dispatch(logOut({}))\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 界面信息初始化\nexport const initMain = token => {\n    return async dispatch => {\n        const response = await reqUserChatDataInit(token)\n        const result = response.data\n        if (result.code === 200) {\n            // 返回值得到的是 用户信息以及历史会话\n            const {user, contact} = result.data\n            dispatch(userInfo({userInfo: user, contacts: contact}))\n            websocket(user)\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 获取用户信息\nexport const initUserInfo = token => {\n    return async dispatch => {\n        const response = await reqUserInfo(token)\n        const result = response.data\n        if (result.code === 200) {\n            dispatch(userInfo(result.data))\n            websocket(result.data.userInfo)\n        } else {\n            dispatch(errMsg(result.msg))\n        }\n    }\n}\n\n// 修改消息会话列表\nexport const modifyContacts = contacts => {\n    return dispatch => {\n        dispatch(modifyUserContacts({contacts}))\n    }\n}\n\n// 初始化消息列表\nexport const initChatInfo = chatUserInfo => {\n    return dispatch => {\n        let messList = chatUserInfo.uid === 1 ? [\n            {\n                id: 1,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 2,\n                avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n                message: \"嗯，我也是\",\n                position: \"right\"\n            },\n            {\n                id: 3,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 4,\n                avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n                message: \"嗯，我也是\",\n                position: \"right\"\n            },\n            {\n                id: 5,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 6,\n                avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n                message: \"嗯，我也是\",\n                position: \"right\"\n            },\n            {\n                id: 7,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 8,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 9,\n                avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n                message: \"嗯，我也是\",\n                position: \"right\"\n            },\n            {\n                id: 10,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 11,\n                avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n                message: \"嗯，我也是\",\n                position: \"right\"\n            },\n            {\n                id: 12,\n                avatar: \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\n                message: \" 我这辈子最后悔的事情，就是创建阿里巴巴，我不喜欢钱，我对钱没有兴趣\",\n                position: \"left\"\n            },\n            {\n                id: 13,\n                avatar: \"http://t8.baidu.com/it/u=3571592872,3353494284&fm=79&app=86&size=h300&n=0&g=4n&f=jpeg?sec=1583315718&t=9caf2bcbcf5ea34c543c426750bb1134\",\n                message: \"好了好了，别说了\",\n                position: \"right\"\n            },\n        ] : []\n        dispatch(initChatData({chatUserInfo, messList, loading: false, showRightType: 'message'}))\n    }\n}\n\n// 切换右侧显示状态\nexport const changeRightType = type => {\n    return dispatch => {\n        dispatch(showRightType({showRightType: type}))\n    }\n}\n\n// 发送消息\nexport const sendChatMsg = chat => {\n    return dispatch => {\n        dispatch(receiveChatMsg(chat))\n    }\n}\n\n// 收到好友消息\n// export const receiveChatMsg = chat => {\n//     return dispatch => {\n//         dispatch(receiveChatMsg(chat))\n//     }\n// }\n\n// 获取好友基本信息\nexport const getFriendInfo = friend_uid => {\n    return async dispatch => {\n        dispatch(changeRightType('userInfo'))\n        await dispatch(showFriendInfo(friend_uid))\n    }\n}\n\n// 获取好友申请列表\nexport const getNewFriendList = token => {\n    return async dispatch => {\n        const response = await reqNewFriendList({token})\n        const result = response.data\n        if (result.code === 200) {\n            dispatch(getNewFriends(result.data.list))\n        }\n    }\n}\n\n// 获取用户通讯录列表\nexport const getUserMailList = token => {\n    return async dispatch => {\n        const response = await reqUserMailList({token})\n        const result = response.data\n        if (result.code === 200) {\n            const mailList = pySegSort(result.data.list)\n            dispatch(getMailList(mailList))\n        }\n    }\n}"]},"metadata":{},"sourceType":"module"}