{"ast":null,"code":"import\"antd/lib/skeleton/style\";import _Skeleton from\"antd/lib/skeleton\";import\"antd/lib/list/style\";import _List from\"antd/lib/list\";import\"antd/lib/badge/style\";import _Badge from\"antd/lib/badge\";import\"antd/lib/avatar/style\";import _Avatar from\"antd/lib/avatar\";import _classCallCheck from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/mr.bo/\\u9879\\u76EE/React/react-im/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{connect}from'react-redux';import InputSearch from'./search';import{initChatInfo}from'../../../redux/actions';var Contacts=/*#__PURE__*/function(_Component){_inherits(Contacts,_Component);function Contacts(){var _getPrototypeOf2;var _this;_classCallCheck(this,Contacts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Contacts)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={initLoading:true,loading:false,list:[]};_this.getData=function(callback){var res=[{uid:1,\"name\":\"马云\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\",\"last\":\"明天 9:00 准时到哦\",unread:10},{uid:2,\"name\":\"王健林\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778837077&di=f569a7c9412eae7b1068ee89ccc9aa9f&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170709%2Fc266207e9ec74666b4dee5f74c634ae1_th.jpg\",\"last\":\"什么？这是什么意思\",unread:300},{uid:3,\"name\":\"马化腾\",\"avatar\":\"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1448222705,364131329&fm=26&gp=0.jpg\",\"last\":\"今天，你充钱了吗？\",unread:1},{uid:4,\"name\":\"巴菲特\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778875578&di=e01fad34bb5d118d8f2a3b4d330b0482&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170518%2F4fbdc7b308224171b7eb127ef241d211_th.jpg\",\"last\":\"明天一起吃饭啊\",unread:5},{uid:5,\"name\":\"刘亦菲\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778899824&di=86416b5c424eec83f25460f53223cded&imgtype=0&src=http%3A%2F%2Fwx3.sinaimg.cn%2Fbmiddle%2F69949546ly1gaxecjgu3gj20u00mi495.jpg\",\"last\":\"今天拍了宣传照，快去看看吧\",unread:1},{uid:6,\"name\":\"刘强东\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778918134&di=a1a98d63733b3abf50a7bf2833061a71&imgtype=jpg&src=http%3A%2F%2Fimg3.imgtn.bdimg.com%2Fit%2Fu%3D3934483023%2C600439244%26fm%3D214%26gp%3D0.jpg\",\"last\":\"妈的，又被告了\",unread:1},{uid:7,\"name\":\"李彦宏\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778934832&di=0696ccada3b7bd6be113536edcfe567f&imgtype=0&src=http%3A%2F%2Fimage.woshipm.com%2Fwp-files%2F2014%2F05%2F0035.jpg\",\"last\":\"百度AI人工智能，造福人类，哈哈哈\",unread:100},{uid:8,\"name\":\"雷军\",\"avatar\":\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582780482194&di=aab09c98f3d82137079cba7fe267b0dc&imgtype=0&src=http%3A%2F%2Fimg.mp.sohu.com%2Fupload%2F20180618%2Fa329dc911c83460b9e16f2a5cc2db364_th.jpg\",\"last\":\"小米，永远相信美好的事情即将发生\",unread:128}];setTimeout(function(){return callback(res);},200);};_this.showMessageByUid=function(uid){var list=_this.state.list;var index=list.findIndex(function(item){return item.uid===uid;});list[index].unread=0;_this.props.initChatInfo(list[index]);};return _this;}_createClass(Contacts,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getData(function(res){_this2.setState({initLoading:false,list:res});});}},{key:\"render\",value:function render(){var _this3=this;var _this$state=this.state,initLoading=_this$state.initLoading,list=_this$state.list;var chatUserInfo=this.props.chat.chatUserInfo;var uid=chatUserInfo.uid;return React.createElement(\"div\",null,React.createElement(\"div\",{className:\"user-search\"},React.createElement(InputSearch,null)),React.createElement(_List,{className:\"mail-list\",loading:initLoading,itemLayout:\"horizontal\",split:false,dataSource:list,renderItem:function renderItem(item){return React.createElement(_List.Item,{className:item.uid===uid?'active':null,onClick:function onClick(){return _this3.showMessageByUid(item.uid);}},React.createElement(_Skeleton,{avatar:true,title:false,loading:item.loading,active:true},React.createElement(_List.Item.Meta,{avatar:React.createElement(_Badge,{count:item.unread},React.createElement(_Avatar,{shape:\"square\",size:\"large\",src:item.avatar})),title:item.name,description:item.last}),React.createElement(\"div\",{className:\"timeDate\"},\"02-24\")));}}));}}]);return Contacts;}(Component);export default connect(function(state){return{chat:state.chat};},{initChatInfo:initChatInfo})(Contacts);","map":{"version":3,"sources":["/Users/mr.bo/项目/React/react-im/src/pages/chat/contacts/index.jsx"],"names":["React","Component","connect","InputSearch","initChatInfo","Contacts","state","initLoading","loading","list","getData","callback","res","uid","unread","setTimeout","showMessageByUid","index","findIndex","item","props","setState","chatUserInfo","chat","avatar","name","last"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { List, Skeleton, Avatar, Badge } from 'antd'\nimport { connect } from 'react-redux'\nimport InputSearch from './search'\n\nimport { initChatInfo } from '../../../redux/actions'\n\nclass Contacts extends Component {\n\n    state = {\n        initLoading: true,\n        loading: false,\n        list: [],\n    }\n\n    componentDidMount() {\n        this.getData(res => {\n            this.setState({\n                initLoading: false,\n                list: res\n            })\n        })\n    }\n\n    getData = callback => {\n        const res = [\n            { uid: 1, \"name\": \"马云\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778785114&di=4bf0a9cbe00cd200465af9fe46b3091e&imgtype=0&src=http%3A%2F%2Fwww.56ec.org.cn%2Fd%2Ffile%2Fnews%2Frwgd%2F2017-05-15%2Fa26c40ec7d83c66d78ad6f791952a01b.jpg\", \"last\":\"明天 9:00 准时到哦\", unread: 10 },\n            { uid: 2, \"name\": \"王健林\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778837077&di=f569a7c9412eae7b1068ee89ccc9aa9f&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170709%2Fc266207e9ec74666b4dee5f74c634ae1_th.jpg\", \"last\":\"什么？这是什么意思\", unread: 300 },\n            { uid: 3, \"name\": \"马化腾\", \"avatar\": \"https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=1448222705,364131329&fm=26&gp=0.jpg\", \"last\":\"今天，你充钱了吗？\", unread: 1 },\n            { uid: 4, \"name\": \"巴菲特\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778875578&di=e01fad34bb5d118d8f2a3b4d330b0482&imgtype=0&src=http%3A%2F%2Fimg.mp.itc.cn%2Fupload%2F20170518%2F4fbdc7b308224171b7eb127ef241d211_th.jpg\", \"last\":\"明天一起吃饭啊\", unread: 5 },\n            { uid: 5, \"name\": \"刘亦菲\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778899824&di=86416b5c424eec83f25460f53223cded&imgtype=0&src=http%3A%2F%2Fwx3.sinaimg.cn%2Fbmiddle%2F69949546ly1gaxecjgu3gj20u00mi495.jpg\", \"last\":\"今天拍了宣传照，快去看看吧\", unread: 1 },\n            { uid: 6, \"name\": \"刘强东\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778918134&di=a1a98d63733b3abf50a7bf2833061a71&imgtype=jpg&src=http%3A%2F%2Fimg3.imgtn.bdimg.com%2Fit%2Fu%3D3934483023%2C600439244%26fm%3D214%26gp%3D0.jpg\", \"last\":\"妈的，又被告了\", unread: 1 },\n            { uid: 7, \"name\": \"李彦宏\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582778934832&di=0696ccada3b7bd6be113536edcfe567f&imgtype=0&src=http%3A%2F%2Fimage.woshipm.com%2Fwp-files%2F2014%2F05%2F0035.jpg\", \"last\":\"百度AI人工智能，造福人类，哈哈哈\", unread: 100 },\n            { uid: 8, \"name\": \"雷军\", \"avatar\": \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1582780482194&di=aab09c98f3d82137079cba7fe267b0dc&imgtype=0&src=http%3A%2F%2Fimg.mp.sohu.com%2Fupload%2F20180618%2Fa329dc911c83460b9e16f2a5cc2db364_th.jpg\", \"last\":\"小米，永远相信美好的事情即将发生\", unread: 128 },\n        ]\n        setTimeout(() => callback(res), 200)\n    }\n\n    showMessageByUid = (uid) => {\n        const { list } = this.state\n        const index = list.findIndex(item => item.uid === uid)\n        list[index].unread = 0\n        this.props.initChatInfo(list[index])\n    }\n\n    render() {\n        const { initLoading, list } = this.state\n        const { chat: { chatUserInfo } } = this.props\n        const { uid } = chatUserInfo\n        return (\n            <div >\n                <div className=\"user-search\"><InputSearch /></div>\n\n                <List className=\"mail-list\" loading={initLoading} itemLayout=\"horizontal\"\n                      split={false} dataSource={list} renderItem={item =>\n                    (\n                        <List.Item className={item.uid === uid ? 'active' : null}\n                                   onClick={ () => this.showMessageByUid(item.uid) }\n                        >\n                            <Skeleton avatar title={false} loading={item.loading} active>\n                                <List.Item.Meta\n                                    avatar={\n                                        <Badge count={item.unread}>\n                                            <Avatar shape=\"square\" size=\"large\" src={item.avatar} />\n                                        </Badge>\n                                    }\n                                    title={item.name}\n                                    description={item.last}\n                                />\n                                <div className=\"timeDate\">02-24</div>\n                            </Skeleton>\n                        </List.Item>\n                    )}\n                />\n            </div>\n        )\n    }\n}\n\nexport default connect(\n    state => ({ chat: state.chat }),\n    { initChatInfo }\n)(Contacts)"]},"metadata":{},"sourceType":"module"}